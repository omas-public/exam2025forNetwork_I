# Network I 問題 & 答案

## 問題 1　digについて以下の問題に答えよ

### www.it-college.ac.jp の A レコードを調べるには、どのような dig コマンドを実行すればよいか。

```txt
解答欄
dig www.it-college.ac.jp

```

### std.it-college.ac.jp の メールサーバを記述せよ。

```txt
解答欄
i; <<>> DiG 9.18.39-0ubuntu0.24.04.2-Ubuntu <<>> it-college.ac.jp MX
;; global options: +cmd
;; Got answer:
;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 24778
;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 1

;; OPT PSEUDOSECTION:
; EDNS: version: 0, flags:; udp: 65494
;; QUESTION SECTION:
;it-college.ac.jp.		IN	MX

;; ANSWER SECTION:
it-college.ac.jp.	3600	IN	MX	10 itcollege-ac-jp0e.mail.protection.outlook.com.

;; Query time: 93 msec
;; SERVER: 127.0.0.53#53(127.0.0.53) (UDP)
;; WHEN: Wed Nov 26 14:19:26 JST 2025
;; MSG SIZE  rcvd: 106
```

## 問題 2 curlを用いて以下の問いに答えよ

### https://www.it-college.ac.jp/ にアクセスし、レスポンスヘッダの内容を貼り付けよ

```txt
解答欄
HTTP/1.1 200 OK
Content-Type: text/html
ETag: "bc2473a18e003bdb249eba5ce893033f:1760028122.592274"
Last-Modified: Thu, 09 Oct 2025 16:42:02 GMT
Cache-Control: max-age=86000
Date: Wed, 26 Nov 2025 06:19:34 GMT
Connection: keep-alive

```
### https://www.it-college.ac.jp/ の HTML ソースコードの画像(png)ファイルの数を答えよ

```txt
解答欄
0枚
```

## 問題 3 ncを用いて以下の問いに答えよ

### www.it-college.ac.jp の 80 番ポートに接続し、HTTP/1.1 の GET リクエストを送信するncコマンドを記述せよ

```txt
解答欄
echo -e "GET / HTTP/1.1\r\nHost: www.it-college.ac.jp\r\n\r\n" | nc www.it-college.ac.jp 80

```
### ncコマンドを用いてクライアントからサーバへ '/etc/passwd' ファイルの内容を送信し、サーバ側でその内容を 'passwd_copy' という名前のファイルに保存するにはどのようなncコマンドを実行すればよいか，サーバ/クライアント両方のコマンドを記述せよ。

server側コマンド:
```txt
解答欄
nc -l -p 12345 > passwd_copy
```
client側コマンド:
```txt
解答欄  
nc  12345 < /etc/passwd
```

## 問題 4 以下のEthernet frame(ICMPパケット)について問いに答えよ

```log
0000   e0 23 ff cf 63 e9 ec 8e 77 f6 49 60 08 00 45 00
0010   00 54 5b fc 40 00 40 01 0e 33 c0 a8 14 e3 a3 2b
0020   57 c3 08 00 3c 7d 23 9c 00 01 93 5f 26 69 00 00
0030   00 00 12 4a 0d 00 00 00 00 00 10 11 12 13 14 15
0040   16 17 18 19 1a 1b 1c 1d 1e 1f 20 21 22 23 24 25
0050   26 27 28 29 2a 2b 2c 2d 2e 2f 30 31 32 33 34 35
0060   36 37
```

### このICMPパケットは、pingコマンドによって送信されたものである。送信元IPアドレスと宛先IPアドレスを答えよ。

```txt
解答欄  
送信元 IP → 192.168.20.227　宛先 IP → 163.43.87.195
```
### このICMPパケットのタイプとコードを答え，どういう状態か説明せよ

```txt
解答欄
タイプは8、コードは0
pingの送信要求
送信先の宛先から「応答をくれ！」というpingのリクエストが送られた状態のこと
```

## 問題 5 NetworkNameSpaceを用いてNetworkとPCおよびルータを用いてPC通信できる環境を構築する

ネットワーク構成: p1(PC) --- r1(Router) --- r2(Router) --- p2(PC)

### 条件

- 172.31.0.0/24 ネットワークを4つに分割し，2番目以降の3つのネットワークを用いること
- p1, p2はそれぞれのネットワークで使用できる最初のIPアドレスを使用し，それに接続しているルータのインターフェースには最後のIPアドレスを使用すること(r1-r2間の接続は任意)
- PC(p1)からPC(p2)へpingコマンドで疎通確認ができること
- ルーティングはdefault gatewayを使用してはいけない

### 以下の設定の続きをデバイス別に解答欄を記述せよ

```bash
# ネットワークネームスペースの作成
sudo ip netns add p1
sudo ip netns add r1
sudo ip netns add r2
sudo ip netns add p2
# vethペアの作成と接続
sudo ip link add veth-p1-r1 type veth peer name veth-r1-p1
sudo ip link add veth-r1-r2 type veth peer name veth-r2-r1
sudo ip link add veth-r2-p2 type veth peer name veth-p2-r2
# 各ネットワークネームスペースにインターフェースを割り当て
sudo ip link set veth-p1-r1 netns p1
sudo ip link set veth-r1-p1 netns r1
sudo ip link set veth-r1-r2 netns r1
sudo ip link set veth-r2-r1 netns r2
sudo ip link set veth-r2-p2 netns r2
sudo ip link set veth-p2-r2 netns p2
# インターフェースの有効化
sudo ip netns exec p1 ip link set dev veth-p1-r1 up
sudo ip netns exec r1 ip link set dev veth-r1-p1 up
sudo ip netns exec r1 ip link set dev veth-r1-r2 up
sudo ip netns exec r2 ip link set dev veth-r2-r1 up
sudo ip netns exec r2 ip link set dev veth-r2-p2 up
sudo ip netns exec p2 ip link set dev veth-p2-r2 up
```

#### p1の設定

```bash
解答欄
sudo ip netns exec p1 ip addr add 172.31.0.65/26 dev veth-p1-r1
sudo ip netns exec p1 ip route add 172.31.0.192/26 via 172.31.0.126
sudo ip netns exec p1 ip route add 172.31.0.128/26 via 172.31.0.126
```
#### r1の設定

```bash
解答欄  
sudo ip netns exec r1 ip addr add 172.31.0.126/26 dev veth-r1-p1
sudo ip netns exec r1 ip addr add 172.31.0.129/26 dev veth-r1-r2
sudo ip netns exec r1 ip route add 172.31.0.192/26 via 172.31.0.190
```
#### r2の設定   

```bash
解答欄  
sudo ip netns exec r2 ip addr add 172.31.0.190/26 dev veth-r2-r1
sudo ip netns exec r2 ip addr add 172.31.0.193/26 dev veth-r2-p2
sudo ip netns exec r2 ip route add 172.31.0.64/26 via 172.31.0.129
```
#### p2の設定   

```bash
解答欄  
sudo ip netns exec p2 ip addr add 172.31.0.193/26 dev veth-p2-r2
sudo ip netns exec p2 ip route add 172.31.0.64/26 via 172.31.0.254
sudo ip netns exec p2 ip route add 172.31.0.128/26 via 172.31.0.254
```
## 問題 6　この講義で学んだことについて自由に記述せよ

```txt
解答欄  
この講義で学んだことは、Network Namespaceを用いて孤立したネットワーク環境を作る方法を学ぶことができました、ip netns addで新しいネットワーク空間を作成したりして、veth　peerを使い、接続していく手順を実際でターミナル内で動かしたりして、友達とも教えあったり、意見を交流するなど、理解することができました。
また、自分の気付きとしてはNetwork Namespaceのコマンド「sudo netns add ネットワーク名」「ip netns list」が「mkdir」「ls」と似ている共通点を見つけ、ネットワークの理解が深まったなと感じられました
```
